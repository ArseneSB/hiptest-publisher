<% variables = @children[:chunks].map {|chunk| chunk if chunk.is_a? Zest::Nodes::Variable}.compact %>
<% if variables.empty? %>"<%= @children[:chunks].map do |chunk|
  if chunk.is_a? Zest::Nodes::Variable
    "%s"
  else
    "#{chunk.children[:value]}".gsub(/"/) {|_| '\\"' }
  end
end.join %>"<% else %>String.format("<%= @children[:chunks].map do |chunk|
  if chunk.is_a? Zest::Nodes::Variable
    "%s"
  else
    "#{chunk.children[:value]}".gsub(/"/) {|_| '\\"' }
  end
end.join %>", <%= variables.map {|var| var.rendered }.join(', ') %>)<% end %>